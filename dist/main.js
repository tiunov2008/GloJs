(()=>{"use strict";let e=!1;class t{constructor({selector:e,pattern:t,method:n}){this.form=document.querySelector(e),this.pattern=t,this.method=n,this.elementsForm=[...this.form.elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type)),this.error=new Set}init(){this.applyStyle(),this.setPattern(),this.elementsForm.forEach((e=>e.addEventListener("change",this.checkIt.bind(this)))),this.form.addEventListener("submit",(t=>{if(this.elementsForm.forEach((e=>this.checkIt({target:e}))),this.error.size)return t.preventDefault(),void(e=!0);e=!1,this.elementsForm.forEach((e=>e.classList.remove("success")))}))}isValid(e){const t={notEmpty:e=>""!==e.value.trim(),pattern:(e,t)=>t.test(e.value)};if(!this.method)return console.warn("Передайте методы"),!0;{const n=this.method[e.id];if(n)return n.every((n=>t[n[0]](e,this.pattern[n[1]])))}}checkIt(e){const t=e.target;this.isValid(t)?(this.showSuccess(t),this.error.delete(t)):(this.showError(t),this.error.add(t))}showError(e){if(e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error"))return;const t=document.createElement("div");t.textContent="Ошибка в этом поле",t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t)}showSuccess(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()}applyStyle(){const e=document.createElement("style");e.textContent="\n        input.success {\n            border: 2px solid green !important;\n        }\n        input.error {\n            border: 2px solid red !important;\n        }\n        .validator-error {\n            font-size: 14px !important;\n            color: red !important;\n            font-family: sans-serif !important;\n        }\n        ",document.head.appendChild(e)}setPattern(){this.pattern.phone||(this.pattern.phone=/^\+?[78]([-()]*\d){10}$/),this.pattern.email||(this.pattern.email=/^\w+@+\w+\.\w{2,}$/)}}const n=new t({selector:"#form1",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,email:/^\w+@+\w+\.\w{2,}$/,phone:/^((8|\+7)[- ]?)?(\(?\d{3}\)?[- ]?)?[\d\- ]{7,10}$/},method:{"form1-name":[["notEmpty"],["pattern","name"]],"form1-email":[["notEmpty"],["pattern","email"]],"form1-phone":[["notEmpty"],["pattern","phone"]]}}),o=new t({selector:"#form2",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,message:/[а-яё -]/gi,email:/^\w+@+\w+\.\w{2,}$/,phone:/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/},method:{"form2-name":[["notEmpty"],["pattern","name"]],"form2-message":[["notEmpty"],["pattern","message"]],"form2-email":[["notEmpty"],["pattern","email"]],"form2-phone":[["notEmpty"],["pattern","phone"]]}}),r=new t({selector:"#form3",pattern:{name:/[A-Za-zА-Яа-яЁё]{2,}/,email:/^\w+@+\w+\.\w{2,}$/,phone:/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/},method:{"form3-name":[["notEmpty"],["pattern","name"]],"form3-email":[["notEmpty"],["pattern","email"]],"form3-phone":[["notEmpty"],["pattern","phone"]]}});n.init(),o.init(),r.init();const a=new Date;(function(e){const t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){return void 0===e.toString()[1]?"0"+e:e}function a(){const a=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60)%24,minutes:o,seconds:n}}();a.timeRemaining<0?(t.textContent="00",n.textContent="00",o.textContent="00"):(t.textContent=r(a.hours),n.textContent=r(a.minutes),o.textContent=r(a.seconds))}a(),setInterval(a,1e3)})(`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()+1}`),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),n=t.querySelectorAll("ul>li>a");document.body.addEventListener("click",(o=>{const r=o.target;r.classList.contains("close-btn")?t.classList.remove("active-menu"):r.closest(".menu")===e?t.classList.add("active-menu"):r!==t&&"li"!==r.tagName.toLowerCase()&&t.classList.remove("active-menu"),n.forEach((e=>{r===e&&(((e,t)=>{e.preventDefault();const n=t.getAttribute("href").substring(1),o=document.getElementById(n).getBoundingClientRect().top;window.scrollBy({top:o,behavior:"smooth"})})(o,e),t.classList.remove("active-menu"))}))}))})(),document.querySelector("a").addEventListener("click",(function(e){((e,t)=>{e.preventDefault();const n=t.getAttribute("href").substring(1),o=document.getElementById(n).getBoundingClientRect().top;window.scrollBy({top:o,behavior:"smooth"})})(e,this)})),(()=>{const e=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block"}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?e.style.display="none":(n=n.closest(".popup-content"),n||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o?t.forEach(((e,r)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(r)})):o=o.parentNode}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item");let t=document.querySelectorAll(".dot");const n=document.querySelector(".portfolio-content");let o,r=0;(()=>{for(let t=0;t<e.length;t++){const e=document.createElement("li");e.classList.add("dot"),0===t&&e.classList.add("dot-active"),document.querySelector(".portfolio-dots").append(e)}})(),t=document.querySelectorAll(".dot");const a=(e,t,n)=>{e[t].classList.remove(n)},s=(e,t,n)=>{e[t].classList.add(n)},l=()=>{a(e,r,"portfolio-item-active"),a(t,r,"dot-active"),r++,r>=e.length&&(r=0),s(e,r,"portfolio-item-active"),s(t,r,"dot-active")},c=e=>{o=setInterval(l,e)};n.addEventListener("click",(n=>{n.preventDefault();const o=n.target;o.matches(".portfolio-btn, .dot")&&(a(e,r,"portfolio-item-active"),a(t,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&t.forEach(((e,t)=>{e===o&&(r=t)})),r>=e.length&&(r=0),r<0&&(r=e.length-1),s(e,r,"portfolio-item-active"),s(t,r,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&c(1500)})),c(1500)})(),((e=100)=>{let t,n=0;const o=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),s=document.querySelector(".calc-day"),l=document.querySelector(".calc-count"),c=document.getElementById("total");o.addEventListener("change",(o=>{const i=o.target;(i.matches("select")||i.matches("input"))&&(()=>{let o=0,i=1,d=1;const u=r.options[r.selectedIndex].value,m=+a.value;l.value>1&&(i+=(l.value-1)/10),s.value&&s.value<5?d*=2:s.value&&s.value<10&&(d*=1.5),u&&m&&(o=Math.ceil(e*u*m*i*d));const p=e=>{c.textContent=e};let v=0;t<o?v=(o-t)/100:t>o&&(v=(t-o)/100);let h=0;const f=setInterval((()=>{h++,n<o?(n+=v,r.disabled="true",a.disabled="true",s.disabled="true",l.disabled="true",p(n)):n>o&&(n-=v,r.disabled="true",a.disabled="true",s.disabled="true",l.disabled="true",p(n)),100===h&&(clearInterval(f),p(o),r.removeAttribute("disabled"),a.removeAttribute("disabled"),s.removeAttribute("disabled"),l.removeAttribute("disabled"))}),10);t=o,""===r.options[r.selectedIndex].value&&""===a.value&&""===s.value&&""===l.value&&(o=0,i=1,d=1,n=0,t=0)})()}))})(100),(()=>{function e(e){return e.toLowerCase().replace(/(?<!\p{Lowercase})\p{Lowercase}/gu,(e=>e.toUpperCase()))}const t=document.getElementById("form1-phone"),n=document.getElementById("form1-name"),o=document.getElementById("form1-email"),r=document.getElementById("form2-phone"),a=document.getElementById("form2-name"),s=document.getElementById("form2-email"),l=document.getElementById("form2-message"),c=document.getElementById("form3-phone"),i=document.getElementById("form3-name"),d=document.getElementById("form3-email");r.addEventListener("input",(()=>{r.value=r.value.replace(/[^0-9()+-]/,"")})),a.addEventListener("input",(()=>{a.value=a.value.replace(/[^а-яё -]/gi,"")})),s.addEventListener("input",(()=>{s.value=s.value.replace(/[^a-z@_.!~*'-]/gi,"")})),t.addEventListener("input",(()=>{t.value=t.value.replace(/[^0-9()+-]/,"")})),n.addEventListener("input",(()=>{n.value=n.value.replace(/[^а-яё -]/gi,"")})),o.addEventListener("input",(()=>{o.value=o.value.replace(/[^a-z@_.!~*'-]/gi,"")})),c.addEventListener("input",(()=>{c.value=c.value.replace(/[^0-9()+-]/,"")})),i.addEventListener("input",(()=>{i.value=i.value.replace(/[^а-яё -]/gi,"")})),d.addEventListener("input",(()=>{d.value=d.value.replace(/[^a-z@_.!~*'-]/gi,"")})),l.addEventListener("input",(()=>{l.value=l.value.replace(/[^а-яё -]/gi,"")}));const u=e=>{e.value=e.value.trim().replace(/^\\-/,"").replace(/ {1,}/g," ").replace(/\\-{1,}/g,"-").replace(/\+{1,}/g,"+")};r.addEventListener("focusout",(()=>{u(r)})),a.addEventListener("focusout",(()=>{u(a),a.value=e(a.value)})),s.addEventListener("focusout",(()=>{u(s)})),t.addEventListener("focusout",(()=>{u(t)})),n.addEventListener("focusout",(()=>{u(n),n.value=e(n.value)})),o.addEventListener("focusout",(()=>{u(o)})),c.addEventListener("focusout",(()=>{u(c)})),i.addEventListener("focusout",(()=>{u(i),i.value=e(i.value)})),d.addEventListener("focusout",(()=>{u(d)})),l.addEventListener("focusout",(()=>{u(l)}))})(),(()=>{const e=document.getElementById("form2-phone"),t=document.getElementById("form2-name"),n=document.getElementById("form2-email"),o=document.getElementById("form2-message");e.addEventListener("input",(()=>{e.value=e.value.replace(/[^0-9()+-]/,"")})),t.addEventListener("input",(()=>{t.value=t.value.replace(/[^а-яё -]/gi,"")})),n.addEventListener("input",(()=>{n.value=n.value.replace(/[^a-z@_.!~*'-]/gi,"")})),o.addEventListener("input",(()=>{o.value=o.value.replace(/[^а-яё -]/gi,"")}));const r=e=>{e.value=e.value.trim().replace(/^\\-/,"").replace(/ {1,}/g," ").replace(/\\-{1,}/g,"-").replace(/\+{1,}/g,"+")};e.addEventListener("focusout",(()=>{r(e)})),t.addEventListener("focusout",(()=>{r(t),t.value=t.value.toLowerCase().replace(/(?<!\p{Lowercase})\p{Lowercase}/gu,(e=>e.toUpperCase()))})),n.addEventListener("focusout",(()=>{r(n)})),o.addEventListener("focusout",(()=>{r(o)}))})(),document.querySelectorAll(".command__photo").forEach((e=>{let t;e.addEventListener("mouseenter",(e=>{t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(e=>{e.target.src=t}))})),(()=>{const t=[...document.querySelectorAll("form")],n=document.createElement("div");n.style.cssText="font-size: 2rem; color: #FFF !important;",t.forEach((t=>{t.addEventListener("submit",(o=>{if(o.preventDefault(),!e){t.appendChild(n),n.textContent="Загрузка...";const e=new FormData(t),o={};for(const t of e.entries())o[t[0]]=t[1];(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(o).then((e=>{if(200!==e.status)throw new Error("Status network not 200");n.textContent="Спасибо! Мы скоро с вами свяжимся!",setTimeout((()=>{n.remove(),document.querySelector(".popup").style.display="none"}),3e3),t.reset()})).catch((e=>{n.textContent="Что то пошло не так...",setTimeout((()=>{n.remove(),document.querySelector(".popup").style.display="none"}),3e3),t.reset()}))}}))}))})()})();